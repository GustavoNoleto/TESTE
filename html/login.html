<!DOCTYPE html>
<html>
<head>
  <title>Login com MFA (sem acesso condicional)</title>
  <script src="https://alcdn.msauth.net/browser/2.34.0/js/msal-browser.min.js"></script>
</head>
<body>
  <h2>Login com Azure AD for√ßando MFA</h2>
  <button onclick="signIn()">Entrar</button>

  <script>
    const msalConfig = {
      auth: {
        clientId: '817bba57-5d3f-41ae-82fc-cefb5febd08c',  // Seu client ID
        authority: 'https://login.microsoftonline.com/3ce9f1fb-3751-4eea-be2e-b8e1c09c90d8', // Seu tenant ID
        redirectUri: window.location.href
      }
    };

    const msalInstance = new msal.PublicClientApplication(msalConfig);

    async function signIn() {
      const mfaClaims = {
        "access_token": {
          "amr": {
            "essential": true,
            "values": ["mfa"]
          }
        }
      };

      try {
        const loginResponse = await msalInstance.loginPopup({
          scopes: ["User.Read"],
          claims: JSON.stringify(mfaClaims)
        });

        console.log("Login com MFA feito!", loginResponse);
        alert("Login com MFA feito com sucesso!");
      } catch (err) {
        console.error("Erro no login com MFA:", err);
        alert("Erro: veja o console.");
      }
    }
  </script>
</body>
</html>
